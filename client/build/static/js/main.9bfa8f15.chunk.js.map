{"version":3,"sources":["store/actions/uiActions.js","store/actionTypes.js","serverApi/restApi.js","store/actions/chatActions.js","serverApi/socketClient.js","store/actions/authActions.js","pages/login.js","components/userDropDown.js","components/sidePanel.js","components/message.js","components/error.js","components/messagesArea.js","pages/chatUi.js","components/spinner.js","App.js","store/reducers/uiReducer.js","store/reducers/authReducer.js","store/reducers/chatReducer.js","store/store.js","serviceWorker.js","index.js"],"names":["setLoginError","error","type","baseUrl","window","location","origin","post","url","body","headers","fetch","method","JSON","stringify","Object","objectSpread","Content-Type","signup","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","username","password","res","wrap","_context","prev","next","name","sent","status","Error","console","log","abrupt","t0","stop","_x","_x2","apply","this","arguments","login","_ref2","_callee2","_context2","json","_x3","_x4","autoLogin","_ref3","_callee3","token","_context3","Authorization","_x5","getMessages","_ref4","_callee4","from","resData","_context4","concat","messages","parse","join","reverse","_x6","_x7","_x8","updateUsers","users","usersArr","length","map","index","pending","addMessage","message","dispatch","getState","_getState$auth","auth","localStorage","getItem","restApi","setItem","fetchMessages","setAuth","authState","socket","handleNewMessage","chat","activeChat","setPendingMessage","handleConnection","loginData","updateUsersCb","setUserCb","handleMessageCb","io","on","data","push","emit","authData","Login","state","isSignup","rePassword","toggleLogin","_this","props","setSignup","handleChange","event","setState","defineProperty","target","value","handleSubmit","_this$state","preventDefault","validateForm","then","authStateChanged","isLogin","_this$state2","react_default","createElement","className","onSubmit","placeholder","onChange","style","fontSize","color","loginError","onClick","Component","connect","ui","actions","uiActions","socketClient","chatActions","errorMsg","UserDropDown","isMobile","cursor","onLogout","SidePanel","userDropDown","user","onUserClick","key","Message","itsMe","messageFrom","moment","Number","messageTime","fromNow","messageContent","width","MessagesArea","onBackClick","ref","msgBoxRef","components_message","currentUser","onMessageChanged","aria-label","aria-describedby","inputText","onSendMessage","id","components_error","ChatUi","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleLogout","logout","handelUserClick","toggleActiveChat","setActiveChat","prevState","messageInput","handleMessageChange","handleSendMessage","sendMessage","to","content","time","handleBackClick","getMsgBoxRef","node","componentDidUpdate","scrollTop","scrollHeight","componentDidMount","updateWindowDimensions","addEventListener","componentWillUnmount","removeEventListener","innerWidth","setMobileView","rendeeSidePanel","cols","sidePanel","usersList","renderMessagesArea","backgroundColor","messagesArea","responsive","displayComponent","padding","margin","mobileActiveChat","screenWidth","screenHeight","isAuth","removeItem","Date","now","toString","Spinner","App","onAuthStateChanged","history","_this2","_this3","isLoading","spinner","react_router","exact","path","render","chatUi","assign","pages_login","initialState","chatError","reducer","undefined","action","startLoading","stopLoading","setChatError","nextState","produce","draftState","filteredUsers","filter","filterUser","findIndex","mergedArray","updatedArray","i","j","splice","uniqueConcat","userIndex","rootReducer","combineReducers","uiReducer","authReducer","chatReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","Boolean","hostname","match","Root","withRouter","ReactDOM","es","react_router_dom","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9bfa8f15.chunk.js","sourcesContent":["import *as actionTypes from '../actionTypes'\n\nexport const startLoading = () => {\n  return {\n    type: actionTypes.UI_START_LOADING,\n  };\n};\n\nexport const stopLoading = () => {\n  return {\n    type: actionTypes.UI_STOP_LOADING,\n  };\n};\nexport const setSignup = isSignup => {\n  return {\n    type: actionTypes.IS_SIGNUP,\n    isSignup:isSignup\n  };\n};\nexport const setLoginError = error => {\n\n  return {\n    type: actionTypes.UI_SET_LOGIN_ERROR,\n    error:error\n  };\n};\nexport const setMobileView = isMobile => {\n  return {\n    type: actionTypes.SET_MOBILE_VIEW,\n    isMobile:isMobile\n  };\n};\nexport const setChatError = error => {\n  return {\n    type: actionTypes.UI_SET_CHAT_ERROR,\n    error:error\n  };\n};\n","export const UI_START_LOADING = 'UI_START_LOADING'\nexport const UI_STOP_LOADING = 'UI_STOP_LOADING'\nexport const UI_SET_LOGIN_ERROR = 'UI_SET_LOGIN_ERROR'\nexport const IS_SIGNUP = 'IS_SIGNUP'\nexport const SET_AUTH = 'SET_AUTH'\nexport const SET_USERS = 'SET_USERS'\nexport const SEND_MESSAGE = 'SEND_MESSAGE'\nexport const GET_MESSAGES = 'GET_MESSAGES'\nexport const SET_PENDING_MESSAGE = 'SET_PENDING_MESSAGE'\nexport const SET_ACTIVE_CHAT = 'SET_ACTIVE_CHAT'\nexport const UI_SET_CHAT_ERROR = 'UI_SET_CHAT_ERROR'\nexport const SET_MOBILE_VIEW = 'SET_MOBILE_VIEW'\n\n\n","\r\nlet baseUrl = window.location.origin\r\n//let baseUrl = \"http://localhost:5000\"\r\n\r\n//Api\r\nconst get = (url,headers) => {\r\n  return fetch(baseUrl + url, {method: 'GET',headers:{...headers}})\r\n\r\n}\r\nconst put = (url, body) => {\r\n  return fetch(baseUrl + url, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(body),\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  })\r\n}\r\n\r\nconst post = (url, body,headers) => {\r\n  return fetch(baseUrl + url, {\r\n    method: 'POST',\r\n    body: JSON.stringify(body),\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...headers\r\n    }\r\n  })\r\n}\r\n\r\n//Calls\r\nexport const signup = async (username,password) => {\r\n  try {\r\n   const res = await put(`/auth/signup`, {name: username, password: password})\r\n    if (res.status === 422) {\r\n      throw new Error(\r\n        'Validation failed. Make sure the email address isn\\'t used yet!'\r\n      )\r\n    }\r\n    if (res.status !== 200 && res.status !== 201) {\r\n      console.log('Error!')\r\n      throw new Error('Creating a user failed!')\r\n    }\r\n    return true\r\n  }\r\n  catch (err) {\r\n    throw (err)\r\n  }\r\n\r\n}\r\nexport const login = async (username,password) => {\r\n  try {\r\n    let res = await post('/auth/login', {name: username, password: password})\r\n    if (res.status === 422) {\r\n      throw new Error('Not a member of ChatBox')\r\n    }\r\n    if (res.status === 401) {\r\n      throw new Error('Wrong password')\r\n    }\r\n    if (res.status !== 200 && res.status !== 201) {\r\n      console.log('Error!', res.status)\r\n      throw new Error('Could not authenticate you!')\r\n    }\r\n    return res.json()\r\n  }\r\n  catch (err) {\r\n    throw (err)\r\n  }\r\n\r\n}\r\n\r\nexport const autoLogin = async (token) => {\r\n  try {\r\n    let res = await post('/auth/autologin', {}, {Authorization: 'Bearer ' + token})\r\n    if (res.status === 401) {\r\n      throw new Error('Validation failed.')\r\n    }\r\n    if (res.status !== 200 && res.status !== 201) {\r\n      throw new Error('Could not authenticate you!')\r\n    }\r\n    return res.json()\r\n  }\r\n  catch (err) {\r\n    throw (err)\r\n  }\r\n\r\n}\r\nexport const getMessages = async (username,from,token) => {\r\n  try {\r\n    let resData\r\n  let  res = await get(`/messages/${username}/${from}`,{Authorization: 'Bearer ' + token})\r\n    if(res.status === 401){\r\n      const error = new Error('unauthorized')\r\n      throw error\r\n    }\r\n    resData = await res.json()\r\n    if(!resData.messages){\r\n\r\n      return []\r\n    }\r\n    return JSON.parse('[' + resData.messages.join(',') + ']').reverse()\r\n  }\r\n  catch (err) {\r\n    throw (err)\r\n  }\r\n}\r\n\r\n","import *as actionTypes from '../actionTypes'\nimport * as restApi from '../../serverApi/restApi'\nimport {setAuth} from './authActions'\n\nexport const updateUsers = users => {\n  let usersArr = []\n  if (users.length !== 0) {\n    usersArr = users.map((name, index) => {\n      return {username: name, pending: 0}\n    })\n  }\n  return {\n    type: actionTypes.SET_USERS,\n    users: usersArr,\n  }\n}\nexport const sendMessage = message => {\n  return (dispatch,getState) =>{\n    const {socket} = getState().auth\n    message.time = Date.now().toString()\n    let messages = JSON.parse(localStorage.getItem(message.to))\n    if (messages) {\n      messages.push(message)\n    } else {\n      messages = [message]\n\n    }\n    localStorage.setItem(message.to, JSON.stringify(messages))\n    socket.emit('msg', message)\n    dispatch(addMessage(message))\n  }\n\n}\nexport const addMessage = (message) =>{\n  return {\n    type: actionTypes.SEND_MESSAGE,\n    message: message,\n  }\n}\nexport const getMessages = (from) => {\n  return async (dispatch,getState) => {\n    try {\n      const {username,token} = getState().auth\n      let messages = JSON.parse(localStorage.getItem(from))\n      if (!messages) {\n        messages = await restApi.getMessages(username,from,token)\n        localStorage.setItem(from, JSON.stringify(messages))\n      }\n      dispatch(fetchMessages(messages))\n    } catch (err) {\n      if (err.message === 'unauthorized'){\n        dispatch(setAuth({\n          authState: false,\n          username: '',\n          token: '',\n          socket: {}\n        }))\n      }\n      console.log(err)\n    }\n\n  }\n}\nexport const fetchMessages = (messages) => {\n  return {\n    type: actionTypes.GET_MESSAGES,\n    messages: messages || []\n  }\n}\nexport const setActiveChat = (activeChat) => {\n\n  return {\n    type: actionTypes.SET_ACTIVE_CHAT,\n    activeChat: activeChat\n  }\n}\nexport const handleNewMessage = (from) => {\n  return (dispatch,getState) => {\n    const {activeChat} = getState().chat\n    if (activeChat === from) {\n      dispatch(getMessages(from))\n    } else {\n      dispatch(setPendingMessage(from, 1))\n    }\n  }\n}\nexport const setPendingMessage = (from, pending) => {\n  return {\n    type: actionTypes.SET_PENDING_MESSAGE,\n    from: from,\n    pending: pending\n  }\n}\n\n\n\n\n","import io from 'socket.io-client'\r\n\r\nexport const handleConnection =(loginData,updateUsersCb,setUserCb,handleMessageCb)=>{\r\n\r\n  const socket = io(window.location.origin)\r\n  //const socket = io(\"http://localhost:5000\")\r\n  setUserCb(socket)\r\n\r\n  socket.on('users', (data) => {\r\n    let users = JSON.parse(data)\r\n    updateUsersCb(users)\r\n  })\r\n  socket.on('new_message', (data) => {\r\n    let message = JSON.parse(data)\r\n\r\n    let messages = JSON.parse(localStorage.getItem(message.from))\r\n    if (messages) {\r\n\r\n      messages.push(message)\r\n    } else {\r\n      messages = [message]\r\n\r\n    }\r\n    localStorage.setItem(message.from, JSON.stringify(messages))\r\n    handleMessageCb(message.from)\r\n  })\r\n  socket.emit('logged_in', {username: loginData.username})\r\n  updateUsersCb(loginData.users)\r\n  localStorage.setItem('username', loginData.username)\r\n}\r\n","import *as actionTypes from '../actionTypes'\nimport * as uiActions from './uiActions'\nimport * as chatActions from './chatActions'\nimport * as socketClient from '../../serverApi/socketClient'\nimport * as restApi from '../../serverApi/restApi'\n\n\nexport const setAuth = authData => {\n  return {\n    type: actionTypes.SET_AUTH,\n    authData: authData,\n  }\n}\nexport const logOut = () => {\n  return (dispatch,getState) => {\n    const {socket} = getState().auth\n    socket.emit(\"logout\")\n    dispatch(setAuth({\n      authState: false,\n      username: '',\n      token: '',\n      socket: {}\n    }))\n    localStorage.removeItem('token')\n  }\n}\n\nexport const signUp = (username, password) => {\n  return async dispatch => {\n    try {\n      dispatch(uiActions.startLoading())\n      dispatch(uiActions.setLoginError(''))\n      await restApi.signup(username,password)\n      dispatch(uiActions.stopLoading())\n      dispatch({type: actionTypes.IS_SIGNUP, isSignup: false})\n\n    }catch (err) {\n      dispatch(uiActions.stopLoading())\n      dispatch(uiActions.setLoginError(err.message))\n    }\n  }\n}\n\nexport const login = (username, password) => {\n  return async dispatch => {\n    try {\n      dispatch(uiActions.startLoading())\n      dispatch(uiActions.setLoginError(''))\n      const resData = await restApi.login(username,password)\n      const token = resData.token\n      localStorage.setItem('token', token)\n      socketClient.handleConnection(resData,users=>{\n        dispatch(chatActions.updateUsers(users))\n      },(socket)=>{\n        dispatch(setAuth({\n          authState: true,\n          username: username,\n          token: token,\n          socket: socket\n        }))\n      },(from)=>{\n        dispatch(chatActions.handleNewMessage(from))\n      })\n      dispatch(uiActions.stopLoading())\n    } catch (err) {\n      dispatch(uiActions.stopLoading())\n      dispatch(uiActions.setLoginError(err.message))\n    }\n\n  }\n}\nexport const autoLogin = (token) => {\n  return async dispatch => {\n    try {\n      dispatch(uiActions.startLoading())\n      const resData = await restApi.autoLogin(token)\n      socketClient.handleConnection(resData,users=>{\n        dispatch(chatActions.updateUsers(users))\n      },(socket)=>{\n        dispatch(setAuth({\n          authState: true,\n          username: resData.username,\n          token: token,\n          socket: socket\n        }))\n      },(from)=>{\n        dispatch(chatActions.handleNewMessage(from))\n      })\n      dispatch(uiActions.stopLoading())\n    } catch (e) {\n      dispatch(uiActions.stopLoading())\n      console.log(e)\n    }\n\n  }\n\n}\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport * as actions from '../store/actions'\n\nclass Login extends Component {\n  state = {\n    isSignup: false,\n    username: '',\n    password: '',\n    rePassword: '',\n  }\n\n  toggleLogin = () => {\n    this.props.setSignup(!this.props.isSignup)\n  }\n\n  handleChange = (event) => {\n    this.setState({[event.target.name]: event.target.value})\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault()\n\n    const {username,password} = this.state\n\n    if (this.props.isSignup) {\n     if( this.validateForm(false)){\n       this.props.signup(username,password)\n     }\n    }\n    else {\n      if( this.validateForm(true)){\n        this.props.login(username,password).then(()=>{\n          this.props.authStateChanged()\n        })\n      }\n\n\n    }\n  }\n  validateForm = (isLogin)=>{\n    let error=\"\"\n    const {username,password,rePassword} = this.state\n    if(password===\"\" ||  username === \"\"){\n      error = \"All fields are required\"\n    }\n     else if (!isLogin && rePassword!==password){\n        error=\"The two passwords do not match\"\n    }\n\n     if(error!==\"\"){\n      this.props.setLoginError(error)\n       return false\n    }\n    else {\n       return true\n     }\n  }\n\n  render () {\n    return (\n      <div className=\"container  \">\n\n        <div className={'row'}>\n\n          <div className={'center-form'}>\n\n            <div className=\"col-sm-12 col-md-10 col-md-offset-1\">\n              <p className={'home-logo text-center mt-4 text-muted'}><i className=\"fas fa-cube\"></i> ChatBox</p>\n              {/*<i className=\"fas fa-cube\"></i><h2>ChatBox</h2>*/}\n              <form onSubmit={this.handleSubmit}>\n                <div className=\"form-group input-group\">\n                  <div className=\"input-group-prepend\">\n                    <span className=\"input-group-text\"> <i className=\"fa fa-user\"></i> </span>\n                  </div>\n                  <input name=\"username\"\n                         className=\"form-control\"\n                         placeholder=\"Username\"\n                         type=\"text\"\n                         onChange={this.handleChange}/>\n                </div>\n                <div className=\"form-group input-group\">\n                  <div className=\"input-group-prepend\">\n                    <span className=\"input-group-text\"> <i className=\"fa fa-lock\"></i> </span>\n                  </div>\n                  <input name={'password'}\n                         className=\"form-control\"\n                         placeholder=\"Password\"\n                         type=\"password\"\n                         onChange={this.handleChange}/>\n                </div>\n                {this.props.isSignup &&\n                  <div className=\"form-group input-group\">\n                    <div className=\"input-group-prepend\">\n                      <span className=\"input-group-text\"> <i className=\"fa fa-lock\"></i> </span>\n                    </div>\n                    <input name={'rePassword'}\n                           className=\"form-control\"\n                           placeholder=\"Repeat password\"\n                           type=\"password\"\n                           onChange={this.handleChange}/>\n                  </div>\n                }\n\n                <div className=\"form-group\">\n                  <button type=\"submit\"\n                          className=\"btn btn-primary btn-block\"> {this.props.isSignup ? 'Create Account' : 'Log In'}</button>\n                </div>\n              </form>\n              <p className=\"text-center my-0\" style={{\"fontSize\":\"0.8rem\",color:\"red\"}}>{this.props.loginError}</p>\n              <br/>\n              <p className=\"text-center\">\n                {this.props.isSignup ? 'Have an account?' : 'Don\\'t have an account?'}\n                <button className={'btn btn-link mb-1'}\n                        onClick={this.toggleLogin}>\n                  {this.props.isSignup ? 'Log In' : 'Signup'}\n                </button>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isSignup: state.ui.isSignup,\n    loginError:state.ui.loginError\n  }\n}\nconst mapDispatchToProps = dispatch => {\n  return {\n    setSignup: (isSignup)=> dispatch(actions.setSignup(isSignup)),\n    login:(username,password)=>dispatch(actions.login(username,password)),\n    signup:(username,password)=>dispatch(actions.signUp(username,password)),\n    setLoginError:(errorMsg)=>dispatch(actions.setLoginError(errorMsg))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst UserDropDown = (props) => (\r\n  <div className={\"dropdown ml-2 float-left \"+(props.isMobile&&'mt-2')}>\r\n    <button className=\"dropbtn\"><i className=\"fas fa-user mr-3\"></i>{!props.isMobile&&props.username}<i\r\n      className=\"fas fa-angle-down ml-3\"></i>\r\n    </button>\r\n    <div className=\"dropdown-content\">\r\n      <div style={{cursor: 'pointer'}}\r\n           onClick={props.onLogout}>Log Out<i\r\n        className=\"ml-3 fas fa-sign-out-alt\"></i></div>\r\n    </div>\r\n  </div>)\r\n\r\nUserDropDown.propTypes = {\r\n  username: PropTypes.string,\r\n  onLogout: PropTypes.func,\r\n  isMobile: PropTypes.bool\r\n}\r\n\r\nexport default UserDropDown\r\n","import React from 'react'\nimport UserDropDown from './userDropDown'\nimport PropTypes from 'prop-types'\n\nconst SidePanel = (props) => (\n  <div className=\"container\">\n    <div className=\"row\">\n      <div className=\"col\">\n{props.isMobile&&<UserDropDown isMobile={props.isMobile}\n                    username={props.username}\n                    onLogout={props.onLogout}/>}\n        <p className={'side-logo text-center mt-4 mx-2 '+ (props.isMobile&&'mr-5 pr-3')}><i\n          className=\"fas fa-cube\"></i> ChatBox</p>\n\n        {!props.isMobile&&<UserDropDown isMobile={props.isMobile}\n          username={props.username}\n          onLogout={props.onLogout}/>}\n\n      </div>\n    </div>\n    <div className={\"row ml-2 \" + (props.isMobile&&\"justify-content-center\")}>\n      <p className={'mt-3 font-weight-bold text-white text-muted '}>Online users list</p>\n\n    </div>\n    {props.isMobile&&<hr/>}\n    {props.users.map((user, index) =>\n      {return(props.username!==user.username)&&(<div className={props.activeChat === user.username?\n        \"active row user-list-item ml-1 \"+(props.isMobile&&\"justify-content-center\")\n        :\"row user-list-item ml-1 \"+(props.isMobile&&\"justify-content-center\")}\n           onClick={()=>props.onUserClick(user.username)}\n           key={index}>{props.activeChat===user.username? <i className=\"fas fa-user-ninja mr-3 pt-1 mb-3 my-auto\"></i>:\n        <i className=\"far fa-user mr-3 pt-1 mb-3 my-auto\"></i>}{user.username}\n        { user.pending !==0 &&\n          <label  className={\"badge badge-pill badge-warning \"+(props.isMobile?'ml-4':'ml-auto')}>{user.pending}</label >} </div>)}\n    )}\n\n  </div>\n\n)\nSidePanel.propTypes = {\n  pending: PropTypes.number,\n  username: PropTypes.string,\n  activeChat: PropTypes.string,\n  onLogout: PropTypes.func,\n  onUserClick: PropTypes.func,\n  isMobile: PropTypes.bool,\n\n}\nexport default SidePanel\n","import React from 'react'\nimport PropTypes from 'prop-types';\nimport moment from 'moment'\nconst Message = (props)=>(\n  <div className=\"row mt-1 \" >\n    <div className=\"col-xs-2 ml-2\">\n      {props.itsMe?<i\n          className=\"far fa-user mt-2 \"\n          style={{\"fontSize\":40}}></i>:\n        <i className=\"fas fa-user-ninja mt-2 \"\n           style={{\"fontSize\":40}}></i>}\n\n    </div>\n    <div className=\"col-xs-12 \">\n      <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col\">\n        <p className={\"font-weight-bold text-monospace ml-2 d-inline-block\"}\n           style={{\"fontSize\":12}}>{props.messageFrom}</p>\n        <p className={\"text-muted ml-1 font-italic d-inline-block\"}\n           style={{\"fontSize\":12}}>{moment(Number(props.messageTime)).fromNow()}</p>\n      </div></div>\n      <div className=\"row\"> <div className=\"col\">\n        <p style={{\"fontSize\":12}}>{props.messageContent}</p>\n      </div>\n      </div>\n    </div></div>\n    <hr style={{width:\"80%\"}}/>\n  </div>\n)\n\nMessage.propTypes ={\n  messageFrom:PropTypes.string,\n  messageTime:PropTypes.string,\n  messageContent:PropTypes.string,\n  itsMe:PropTypes.bool\n}\n\n\nexport default Message\n","import React from 'react'\r\n\r\nconst Error = ()=>(\r\n\r\n    <div className=\"row \">\r\n      {/*<p className={'lead error'}>sdsdsdssdds</p>*/}\r\n    </div>\r\n\r\n)\r\n\r\nexport default Error\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Message from './message'\nimport Error from './error'\n\nconst MessagesArea = (props) => (\n  <div className=\"container chat-panel \">\n    <div className=\"row mx-auto\">\n      <div className=\"col-12 mt-3 chat-header\">\n\n        <p className={'mt-3'}>Chatting with\n          <i className=\"fas fa-long-arrow-alt-right mr-2\"></i>{props.activeChat}\n          {props.isMobile && <i className=\"fas fa-redo float-right\"\n                                style={{cursor: 'pointer'}}\n                                onClick={props.onBackClick}></i>}</p>\n      </div>\n\n\n    </div>\n    <div className=\"row mx-auto\">\n      <div className=\"col-12 mt-3 chat-area \" ref={props.msgBoxRef}>\n        {props.messages.map((message, index) =>\n          <Message key={index}\n                   messageFrom={message['from']}\n                   messageContent={message['content']}\n                   messageTime={message['time']}\n                   itsMe={props.currentUser === message['from']}/>\n        )}\n\n      </div>\n    </div>\n    <div className=\"row mx-auto\">\n      <div className=\"input-group mb-3 mt-5\">\n        <input type=\"text\"\n               className=\"form-control\"\n               onChange={props.onMessageChanged}\n               aria-label=\"Example text with button addon\"\n               aria-describedby=\"button-addon1\"\n               value={props.inputText}\n        />\n        <div className=\"input-group-append\">\n          <button onClick={props.onSendMessage}\n                  className=\"btn btn-outline-primary\"\n                  type=\"button\"\n                  id=\"button-addon1\">Send\n          </button>\n        </div>\n\n      </div>\n    </div>\n    <Error/>\n  </div>\n\n)\n\nMessagesArea.propTypes = {\n  onSendMessage: PropTypes.func,\n  onMessageChanged: PropTypes.func,\n  activeChat: PropTypes.string,\n  messages: PropTypes.array,\n  currentUser: PropTypes.string,\n  inputText: PropTypes.string,\n  msgBoxRef: PropTypes.func,\n  onBackClick: PropTypes.func,\n  isMobile: PropTypes.bool\n}\n\nexport default MessagesArea\n","import React, { Component } from 'react'\nimport SidePanel from '../components/sidePanel'\nimport MessagesArea from '../components/messagesArea'\nimport { connect } from 'react-redux'\nimport * as actions from '../store/actions'\n\nclass ChatUi extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      messageInput: '',\n      mobileActiveChat: false,\n      screenWidth: 0,\n      screenHeight: 0\n    }\n\n  }\n\n  msgBoxRef = {}\n  handleLogout = async () => {\n    await this.props.logout()\n    this.props.authStateChanged()\n  }\n  handelUserClick = (username) => {\n\n    this.toggleActiveChat(username)\n    this.props.getMessages(username)\n  }\n\n  toggleActiveChat = username => {\n    this.props.setActiveChat(username)\n    this.props.setPendingMessage(username, 0)\n    this.setState((prevState) => {\n      return {...prevState, messageInput: ''}\n    })\n\n  }\n  handleMessageChange = event => {\n    let value = event.target.value\n\n    this.setState((prevState) => {\n      return {...prevState, messageInput: value}\n    })\n  }\n  handleSendMessage = () => {\n    if (this.state.messageInput !== '') {\n      this.props.sendMessage({\n        from: this.props.currentUser,\n        to: this.props.activeChat,\n        content: this.state.messageInput,\n        time: ''\n      })\n      this.setState((prevState) => {\n        return {...prevState, messageInput: ''}\n      })\n    }\n  }\n  handleBackClick = () =>{\n    this.props.setActiveChat('')\n  }\n  getMsgBoxRef = (node) => {\n    this.msgBoxRef = node\n  }\n  componentDidUpdate = () => {\n    if(this.msgBoxRef){\n      this.msgBoxRef.scrollTop = this.msgBoxRef.scrollHeight\n    }\n  }\n  componentDidMount = () => {\n    this.updateWindowDimensions()\n    window.addEventListener('resize', this.updateWindowDimensions)\n  }\n\n  componentWillUnmount = () => {\n    window.removeEventListener('resize', this.updateWindowDimensions)\n  }\n  updateWindowDimensions = () => {\n    console.log(window.innerWidth)\n    if (window.innerWidth > 610) {\n      this.props.setMobileView(false)\n    } else {\n      this.props.setMobileView(true)\n    }\n    // this.setState((prevState) => {\n    //   return {...prevState, width: window.innerWidth, height: window.innerHeight}\n    // })\n  }\n  rendeeSidePanel = (cols) => {\n    return (<div className={`col-${cols} side-panel`}>\n      <SidePanel activeChat={this.props.activeChat}\n                 onUserClick={this.handelUserClick}\n                 onLogout={this.handleLogout}\n                 users={this.props.usersList}\n                 username={this.props.currentUser}\n                 isMobile={this.props.isMobile}/>\n    </div>)\n  }\n  renderMessagesArea = (cols) => {\n    return (<div className={`col-${cols}`} style={{'backgroundColor': '#eee'}}>\n      {this.props.activeChat !== '' &&\n      <MessagesArea messages={this.props.messages}\n                    activeChat={this.props.activeChat}\n                    onMessageChanged={this.handleMessageChange}\n                    onSendMessage={this.handleSendMessage}\n                    currentUser={this.props.currentUser}\n                    inputText={this.state.messageInput}\n                    msgBoxRef={this.getMsgBoxRef}\n                    isMobile={this.props.isMobile}\n                    onBackClick={this.handleBackClick}\n      />}\n    </div>)\n  }\n  responsive = () => {\n    let displayComponent\n    if (this.props.isMobile) {\n      if (this.props.activeChat === '') {\n        displayComponent = this.rendeeSidePanel('12')\n      }\n      else {\n        displayComponent = this.renderMessagesArea('12')\n      }\n      return <div className=\"row chatUi\" style={{width: '100vw',padding:0,margin:0}}>\n        {displayComponent}\n      </div>\n    }\n    else {\n      return <div className=\"row \" style={{width: '100%',padding:0,margin:0}}>\n        {this.rendeeSidePanel('4')}{this.renderMessagesArea('8')}\n      </div>\n    }\n  }\n\n  render () {\n    if (!this.props.isAuth) {\n      this.props.authStateChanged()\n    }\n    return (\n      <div className=\"row chatUi\" style={{width: '100vw',padding:0,margin:0}}>\n        {this.responsive()}\n\n      </div>\n\n    )\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuth: state.auth.isAuth,\n    usersList: state.chat.users,\n    currentUser: state.auth.username,\n    messages: state.chat.messages,\n    activeChat: state.chat.activeChat,\n    isMobile: state.ui.isMobile\n  }\n}\nconst mapDispatchToProps = dispatch => {\n  return {\n    logout: () => dispatch(actions.logOut()),\n    sendMessage: (message) => dispatch(actions.sendMessage(message)),\n    getMessages: (from) => dispatch(actions.getMessages(from)),\n    setActiveChat: (activeChat) => dispatch(actions.setActiveChat(activeChat)),\n    setPendingMessage: (from, pending) => dispatch(actions.setPendingMessage(from, pending)),\n    setMobileView: (isMobile) => dispatch(actions.setMobileView(isMobile))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatUi)\n\n","import React from 'react'\n\nconst Spinner = ()=>(\n  <div className=\"spinner-border spinner\"></div>\n)\n\nexport default Spinner\n","import React, { Component } from 'react'\nimport Login from './pages/login'\nimport ChatUi from './pages/chatUi'\nimport {Switch, Route,  } from 'react-router-dom'\nimport './App.css'\nimport * as actions from './store/actions'\nimport { connect } from 'react-redux'\nimport Spinner from './components/spinner'\n\nclass App extends Component {\n  state = {\n    auth: false\n  }\n  onAuthStateChanged = () => {\n    if (this.props.isAuth) {\n      this.props.history.push('/')\n    } else {\n      this.props.history.push('/login')\n    }\n  }\n\n  componentDidMount () {\n    const token = localStorage.getItem('token')\n    if (token) {\n      this.props.autoLogin(token).then(() => {\n        this.onAuthStateChanged()\n      })\n    }\n    this.onAuthStateChanged()\n  }\n\n  render () {\n\n    return (\n      (this.props.isLoading ) ? <Spinner/> :\n        <Switch>\n          <Route exact path=\"/\" render={(props) => <ChatUi {...props} authStateChanged={this.onAuthStateChanged}/>}/>\n          <Route path=\"/login\" render={(props) => <Login {...props} authStateChanged={this.onAuthStateChanged}/>}/>\n        </Switch>\n    )\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuth: state.auth.isAuth,\n    isLoading: state.ui.isLoading\n  }\n}\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAuth: (authState) => dispatch(actions.setAuth(authState)),\n    autoLogin: (token) => dispatch(actions.autoLogin(token))\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n\n","import * as actionTypes from '../actionTypes'\n\nconst initialState = {\n  isLoading: false,\n  isSignup:false,\n  loginError:\"\",\n  chatError:\"\",\n  isMobile:false\n}\n\nconst reducer = (state = initialState, action) => {\n  if (action.type === actionTypes.UI_START_LOADING) {\n    return startLoading(state, action)\n  }\n  else if (action.type === actionTypes.UI_STOP_LOADING) {\n    return stopLoading(state, action)\n  }\n  else if (action.type === actionTypes.IS_SIGNUP) {\n    return setSignup(state, action.isSignup)\n  }\n  else if (action.type === actionTypes.UI_SET_LOGIN_ERROR) {\n    return setLoginError(state, action.error)\n  }\n  else if (action.type === actionTypes.UI_SET_CHAT_ERROR) {\n    return setChatError(state, action.error)\n  }\n  else if (action.type === actionTypes.SET_MOBILE_VIEW) {\n    return setMobileView(state, action.isMobile)\n  }\n  else {\n    return state\n  }\n}\n\nfunction startLoading (state, action) {\n  return {\n    ...state,\n    isLoading: true\n  }\n}\nfunction stopLoading (state, action) {\n  return {\n    ...state,\n    isLoading: false\n  }\n}\nfunction setSignup (state, isSignup) {\n  return {\n    ...state,\n    isSignup: isSignup,\n    loginError:\"\"\n  }\n}\nfunction setLoginError (state, error) {\n  return {\n    ...state,\n    loginError: error\n  }\n}\nfunction setChatError (state, error) {\n  return {\n    ...state,\n    chatError: error\n  }\n}\n\nfunction setMobileView (state, isMobile) {\n  return {\n    ...state,\n    isMobile: isMobile\n  }\n}\nexport default reducer\n","import * as actionTypes from '../actionTypes'\n\nconst initialState = {\n  token:\"\",\n  username:\"\",\n  isAuth:false,\n  socket:{}\n}\n\nconst reducer = (state = initialState, action) => {\n  if (action.type === actionTypes.SET_AUTH) {\n\n    return setAuth(state, action.authData)\n  }\n  else {\n    return state\n  }\n}\n\nfunction setAuth (state,authData) {\n  return {\n\n    token:authData.token,\n    username:authData.username,\n    isAuth: authData.authState,\n    socket:authData.socket\n  }\n}\n\nexport default reducer\n","import * as actionTypes from '../actionTypes'\nimport produce from 'immer'\n\nconst initialState = {\n  users: [],\n  messages: [],\n  activeChat: ''\n}\n\nconst reducer = (state = initialState, action) => {\n  if (action.type === actionTypes.SET_USERS) {\n    return updateUsers(state, action.users)\n  }\n  else if (action.type === actionTypes.SEND_MESSAGE) {\n    return sendMessage(state, action.message)\n  }\n  else if (action.type === actionTypes.GET_MESSAGES) {\n    return getMessages(state, action.messages)\n  }\n  else if (action.type === actionTypes.SET_PENDING_MESSAGE) {\n    return setPendingMessage(state, action.from, action.pending)\n  }\n  else if (action.type === actionTypes.SET_ACTIVE_CHAT) {\n    return setActiveChat(state, action.activeChat)\n  }\n  else {\n    return state\n  }\n}\n\nfunction updateUsers (state, users) {\n  const nextState = produce(state, draftState => {\n    let filteredUsers = draftState.users.filter(filterUser => {\n      return (users.findIndex((user => user.username === filterUser.username)) !== -1)\n    })\n    draftState.users = uniqueConcat(filteredUsers.concat(users))\n  })\n\n  return {\n    ...state,\n    users: nextState.users,\n\n  }\n}\n\nfunction setPendingMessage (state, from, pending) {\n  const nextState = produce(state, draftState => {\n    let userIndex = draftState.users.findIndex((user => user.username === from))\n    if (pending === 0) {\n      draftState.users[userIndex].pending = 0\n    } else {\n      draftState.users[userIndex].pending += 1\n    }\n  })\n  return {\n    ...state,\n    users: nextState.users\n  }\n}\n\nfunction setActiveChat (state, activeChat) {\n  return {\n    ...state,\n    activeChat: activeChat\n  }\n}\n\nfunction sendMessage (state, message) {\n  return {\n    ...state,\n    messages: state.messages.concat([message])\n  }\n}\n\nfunction getMessages (state, messages) {\n  return {\n    ...state,\n    messages: messages\n  }\n}\n\nfunction uniqueConcat (mergedArray) {\n  let updatedArray = mergedArray.concat()\n  for (let i = 0; i < updatedArray.length; ++i) {\n    for (let j = i + 1; j < updatedArray.length; ++j) {\n      if (updatedArray[i].username === updatedArray[j].username) {\n        updatedArray.splice(j--, 1)\n      }\n    }\n  }\n  return updatedArray\n}\n\nexport default reducer\n","import { combineReducers, createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\n\nimport uiReducer from './reducers/uiReducer'\nimport authReducer from './reducers/authReducer'\nimport chatReducer from './reducers/chatReducer'\n\nconst rootReducer = combineReducers({\n  ui: uiReducer,\n  auth: authReducer,\n  chat: chatReducer\n})\n\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)))\n\nexport default store\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './store/store'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter as Router, withRouter } from 'react-router-dom'\n\nimport * as serviceWorker from './serviceWorker';\n\nconst Root = withRouter(App)\n\n\n//ReactDOM.render(<App />, document.getElementById('root'));\nReactDOM.render(<Provider store={store}><Router><Root/></Router></Provider>, document.getElementById('root'))\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}